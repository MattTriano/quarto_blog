<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Triano&#39;s Quarto Blog</title>
<link>https://www.matttriano.net/index.html</link>
<atom:link href="https://www.matttriano.net/index.xml" rel="self" type="application/rss+xml"/>
<description>A blog by Matt Triano</description>
<generator>quarto-1.3.361</generator>
<lastBuildDate>Wed, 14 Jun 2023 00:00:00 GMT</lastBuildDate>
<item>
  <title>Census TIGER Dataset Collector Dev</title>
  <dc:creator>Matt Triano</dc:creator>
  <link>https://www.matttriano.net/posts/004_census_tiger_dev/TIGER_data_collector_dev.html</link>
  <description><![CDATA[ 




<div class="cell" data-execution_count="41">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> textwrap</span>
<span id="cb1-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> typing <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> Dict, List, Union, Optional</span>
<span id="cb1-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> urllib.request <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> urlretrieve</span>
<span id="cb1-4"></span>
<span id="cb1-5"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> bs4 <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> BeautifulSoup</span>
<span id="cb1-6"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> geopandas <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> gpd</span>
<span id="cb1-7"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> matplotlib.pyplot <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> plt</span>
<span id="cb1-8"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> pandas <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> pd</span>
<span id="cb1-9"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> requests</span></code></pre></div>
</details>
</div>
<p>The US Census Bureau (USCB) runs a massive array of surveys of residents of the United States. After aggregating responses into demographic and/or geographic groups, the USCB publishes those aggregated datasets to its massive public data catalog. I’ve already developed some tooling to collect and ingest Census datasets into my personal data warehouse and analytics environment, but to map out geographic Census data or join in other geospatial datasets, I also need to collect and ingest spatial files describing the geographic boundaries of Census groupings. Fortunately, the USCB provides shapefiles with these geometries in their TIGER (Topologically Integrated Geographic Encoding and Referencing) data offerings, and in this notebook, I’ll synthesize the findings the experiments and research in my last notebook into a data model and data collection tools.</p>
<section id="references" class="level3">
<h3 class="anchored" data-anchor-id="references">References:</h3>
<ul>
<li><a href="https://www.census.gov/programs-surveys/geography/technical-documentation/complete-technical-documentation/tiger-geo-line.2022.html">TIGER Technical Docs</a></li>
<li><a href="https://www.census.gov/programs-surveys/geography/technical-documentation/code-lists.html">TIGER Geographic Codes</a></li>
</ul>
<p>Each year, the USCB can add or alter geographic boundaries or connected data features, so they organize TIGER data offering into annual vintages, which can be downloaded either through the USCB web interface or from their <a href="https://www2.census.gov/geo/tiger/">file server interface</a> (https://www2.census.gov/geo/tiger/).</p>
<p>The functions in the cell below aid in scraping the table off of any of pages linked in that file-tree interface.</p>
<div class="cell" data-execution_count="4">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> request_page(metadata_url: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> requests.models.Response:</span>
<span id="cb2-2">    resp <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> requests.get(metadata_url)</span>
<span id="cb2-3">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> resp.status_code <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">200</span>:</span>
<span id="cb2-4">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> resp</span>
<span id="cb2-5">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span>:</span>
<span id="cb2-6">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">raise</span> <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">Exception</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"Couldn't get page metadata for url </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>metadata_url<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb2-7"></span>
<span id="cb2-8"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> scrape_census_ftp_metadata_page(metadata_url: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> pd.DataFrame:</span>
<span id="cb2-9">    resp <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> request_page(metadata_url<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>metadata_url)</span>
<span id="cb2-10">    soup <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> BeautifulSoup(resp.content, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"html.parser"</span>)</span>
<span id="cb2-11">    table <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> soup.find(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"table"</span>)</span>
<span id="cb2-12">    rows <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> table.find_all(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tr"</span>)</span>
<span id="cb2-13">    table_contents <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []</span>
<span id="cb2-14">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> row <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> rows:</span>
<span id="cb2-15">        cols <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> row.find_all(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"td"</span>)</span>
<span id="cb2-16">        cols <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [col.text.strip() <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> col <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> cols]</span>
<span id="cb2-17">        table_contents.append(cols)</span>
<span id="cb2-18">    table_rows <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [el <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> el <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> table_contents <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">len</span>(el) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>]</span>
<span id="cb2-19"></span>
<span id="cb2-20">    metadata_df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.DataFrame(</span>
<span id="cb2-21">        [row[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>:] <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> row <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> table_rows],</span>
<span id="cb2-22">        columns<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"last_modified"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"size"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"description"</span>],</span>
<span id="cb2-23">    )</span>
<span id="cb2-24">    metadata_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"last_modified"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.to_datetime(metadata_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"last_modified"</span>])</span>
<span id="cb2-25">    metadata_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"is_dir"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> metadata_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span>].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>.endswith(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/"</span>)</span>
<span id="cb2-26">    metadata_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"clean_name"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> metadata_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span>].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>.replace(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/$"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>, regex<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb2-27">    metadata_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"is_file"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span>metadata_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"is_dir"</span>]) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;</span> (</span>
<span id="cb2-28">        metadata_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"clean_name"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Parent Directory"</span></span>
<span id="cb2-29">    )</span>
<span id="cb2-30">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">while</span> metadata_url.strip().endswith(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/"</span>):</span>
<span id="cb2-31">        metadata_url <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> metadata_url[:<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]</span>
<span id="cb2-32">    mask <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> metadata_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"is_file"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span> metadata_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"is_dir"</span>]</span>
<span id="cb2-33">    metadata_df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> metadata_df.loc[mask].copy()</span>
<span id="cb2-34">    metadata_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"metadata_url"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (metadata_url <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/"</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> metadata_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"clean_name"</span>])</span>
<span id="cb2-35">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> metadata_df</span></code></pre></div>
</details>
</div>
<p><code>request_page()</code> makes a GET request for the content at the URL <code>metadata_url</code> and returns the response (if successful, i.e.&nbsp;if the response has the “success” HTTP response status code). This function is only called by <code>scrape_census_ftp_metadata_page()</code>, but it’s separated out to make it easier to test <code>scrape_census_ftp_metadata_page()</code>.</p>
<div class="cell" data-execution_count="5">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> request_page(metadata_url: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> requests.models.Response:</span>
<span id="cb3-2">    resp <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> requests.get(metadata_url)</span>
<span id="cb3-3">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> resp.status_code <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">200</span>:</span>
<span id="cb3-4">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> resp</span>
<span id="cb3-5">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span>:</span>
<span id="cb3-6">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">raise</span> <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">Exception</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"Couldn't get page metadata for url </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>metadata_url<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
</details>
</div>
<p><code>scrape_census_ftp_metadata_page()</code> gets the content from a given Census file-tree page (at URL <code>metadata_url</code>), parses it into a convenient and well structured format (a <code>pandas DataFrame</code>) with features that aid in filtering to desired rows.</p>
<div class="cell" data-execution_count="10">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1">resp <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> request_page(metadata_url<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://www2.census.gov/geo/tiger/"</span>)</span>
<span id="cb4-2">soup <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> BeautifulSoup(resp.content, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"html.parser"</span>)</span>
<span id="cb4-3">table <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> soup.find(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"table"</span>)</span>
<span id="cb4-4">rows <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> table.find_all(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tr"</span>)</span>
<span id="cb4-5">rows[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>:<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>]</span></code></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="10">
<pre><code>[&lt;tr&gt;&lt;th valign="top"&gt;&lt;img alt="[ICO]" src="/icons/blank.gif"/&gt;&lt;/th&gt;&lt;th&gt;&lt;a href="?C=N;O=D"&gt;Name&lt;/a&gt;&lt;/th&gt;&lt;th&gt;&lt;a href="?C=M;O=A"&gt;Last modified&lt;/a&gt;&lt;/th&gt;&lt;th&gt;&lt;a href="?C=S;O=A"&gt;Size&lt;/a&gt;&lt;/th&gt;&lt;th&gt;&lt;a href="?C=D;O=A"&gt;Description&lt;/a&gt;&lt;/th&gt;&lt;/tr&gt;,
 &lt;tr&gt;&lt;th colspan="5"&gt;&lt;hr/&gt;&lt;/th&gt;&lt;/tr&gt;,
 &lt;tr&gt;&lt;td valign="top"&gt;&lt;img alt="[PARENTDIR]" src="/icons/back.gif"/&gt;&lt;/td&gt;&lt;td&gt;&lt;a href="/geo/"&gt;Parent Directory&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&nbsp;&lt;/td&gt;&lt;td align="right"&gt;  - &lt;/td&gt;&lt;td&gt;&nbsp;&lt;/td&gt;&lt;/tr&gt;,
 &lt;tr&gt;&lt;td valign="top"&gt;&lt;img alt="[   ]" src="/icons/layout.gif"/&gt;&lt;/td&gt;&lt;td&gt;&lt;a href="Directory_Contents_ReadMe.pdf"&gt;Directory_Contents_ReadMe.pdf&lt;/a&gt;&lt;/td&gt;&lt;td align="right"&gt;2019-06-25 09:13  &lt;/td&gt;&lt;td align="right"&gt;439K&lt;/td&gt;&lt;td&gt;&nbsp;&lt;/td&gt;&lt;/tr&gt;,
 &lt;tr&gt;&lt;td valign="top"&gt;&lt;img alt="[DIR]" src="/icons/folder.gif"/&gt;&lt;/td&gt;&lt;td&gt;&lt;a href="GENZ2010/"&gt;GENZ2010/&lt;/a&gt;&lt;/td&gt;&lt;td align="right"&gt;2013-07-24 12:46  &lt;/td&gt;&lt;td align="right"&gt;  - &lt;/td&gt;&lt;td&gt;&nbsp;&lt;/td&gt;&lt;/tr&gt;,
 &lt;tr&gt;&lt;td valign="top"&gt;&lt;img alt="[DIR]" src="/icons/folder.gif"/&gt;&lt;/td&gt;&lt;td&gt;&lt;a href="GENZ2012/"&gt;GENZ2012/&lt;/a&gt;&lt;/td&gt;&lt;td align="right"&gt;2013-07-24 12:47  &lt;/td&gt;&lt;td align="right"&gt;  - &lt;/td&gt;&lt;td&gt;&nbsp;&lt;/td&gt;&lt;/tr&gt;,
 &lt;tr&gt;&lt;td valign="top"&gt;&lt;img alt="[DIR]" src="/icons/folder.gif"/&gt;&lt;/td&gt;&lt;td&gt;&lt;a href="GENZ2013/"&gt;GENZ2013/&lt;/a&gt;&lt;/td&gt;&lt;td align="right"&gt;2014-07-02 08:28  &lt;/td&gt;&lt;td align="right"&gt;  - &lt;/td&gt;&lt;td&gt;&nbsp;&lt;/td&gt;&lt;/tr&gt;]</code></pre>
</div>
</div>
<p>The cell above shows code that extracts HTML <code>tr</code> (table-row) elements extracted from the page (sorry for showing something so ugly!), and the cell below shows the (beautiful) end product of <code>scrape_census_ftp_metadata_page()</code>.</p>
<div class="cell" data-execution_count="11">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1">all_tiger_vintages_df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> scrape_census_ftp_metadata_page(</span>
<span id="cb6-2">    metadata_url<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://www2.census.gov/geo/tiger/"</span></span>
<span id="cb6-3">)</span>
<span id="cb6-4">display(all_tiger_vintages_df.head(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>))</span></code></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">name</th>
<th data-quarto-table-cell-role="th">last_modified</th>
<th data-quarto-table-cell-role="th">size</th>
<th data-quarto-table-cell-role="th">description</th>
<th data-quarto-table-cell-role="th">is_dir</th>
<th data-quarto-table-cell-role="th">clean_name</th>
<th data-quarto-table-cell-role="th">is_file</th>
<th data-quarto-table-cell-role="th">metadata_url</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>Directory_Contents_ReadMe.pdf</td>
<td>2019-06-25 09:13:00</td>
<td>439K</td>
<td></td>
<td>False</td>
<td>Directory_Contents_ReadMe.pdf</td>
<td>True</td>
<td>https://www2.census.gov/geo/tiger/Directory_Co...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>GENZ2010/</td>
<td>2013-07-24 12:46:00</td>
<td>-</td>
<td></td>
<td>True</td>
<td>GENZ2010</td>
<td>False</td>
<td>https://www2.census.gov/geo/tiger/GENZ2010</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>GENZ2012/</td>
<td>2013-07-24 12:47:00</td>
<td>-</td>
<td></td>
<td>True</td>
<td>GENZ2012</td>
<td>False</td>
<td>https://www2.census.gov/geo/tiger/GENZ2012</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>GENZ2013/</td>
<td>2014-07-02 08:28:00</td>
<td>-</td>
<td></td>
<td>True</td>
<td>GENZ2013</td>
<td>False</td>
<td>https://www2.census.gov/geo/tiger/GENZ2013</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="26">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"Files on the top-level TIGER dataset page:                </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>all_tiger_vintages_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'is_file'</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>()<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:&gt;3}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb7-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"TIGER data offerings on the top-level TIGER dataset page: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>all_tiger_vintages_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'is_dir'</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>()<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:&gt;3}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Files on the top-level TIGER dataset page:                  1
TIGER data offerings on the top-level TIGER dataset page:  59</code></pre>
</div>
</div>
<p>The <code>GENZyyyy</code> TIGER data offerings are interesting, but the real wealth of geospatial files can be found in the TIGER offerings with names matching the <code>TIGERyyyy</code> pattern, and I implemented the <code>get_tiger_vintages_metadata()</code> function to get the metadata for these offerings, or <strong>vintages</strong>.</p>
<div class="cell" data-execution_count="25">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> get_tiger_vintages_metadata() <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> pd.DataFrame:</span>
<span id="cb9-2">    all_tiger_vintages_df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> scrape_census_ftp_metadata_page(</span>
<span id="cb9-3">        metadata_url<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://www2.census.gov/geo/tiger/"</span></span>
<span id="cb9-4">    )</span>
<span id="cb9-5">    tiger_vintages_df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> all_tiger_vintages_df.loc[</span>
<span id="cb9-6">        all_tiger_vintages_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span>].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>.contains(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"^TIGER\d</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{4}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">/"</span>, regex<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb9-7">    ].copy()</span>
<span id="cb9-8">    tiger_vintages_df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> tiger_vintages_df.sort_values(by<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span>, ignore_index<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb9-9">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> tiger_vintages_df</span>
<span id="cb9-10"></span>
<span id="cb9-11">tiger_vintages_df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> get_tiger_vintages_metadata()</span>
<span id="cb9-12"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"Available TIGER vintages:"</span>)</span>
<span id="cb9-13">names <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> textwrap.wrap(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">", "</span>.join(<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">list</span>(tiger_vintages_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"clean_name"</span>].values)), width<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">95</span>)</span>
<span id="cb9-14"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> line <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> names:</span>
<span id="cb9-15">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"    </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>line<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb9-16">display(tiger_vintages_df.head(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>))</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Available TIGER vintages:
    TIGER1992, TIGER1999, TIGER2002, TIGER2003, TIGER2008, TIGER2009, TIGER2010, TIGER2011,
    TIGER2012, TIGER2013, TIGER2014, TIGER2015, TIGER2016, TIGER2017, TIGER2018, TIGER2019,
    TIGER2020, TIGER2021, TIGER2022</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">name</th>
<th data-quarto-table-cell-role="th">last_modified</th>
<th data-quarto-table-cell-role="th">size</th>
<th data-quarto-table-cell-role="th">description</th>
<th data-quarto-table-cell-role="th">is_dir</th>
<th data-quarto-table-cell-role="th">clean_name</th>
<th data-quarto-table-cell-role="th">is_file</th>
<th data-quarto-table-cell-role="th">metadata_url</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>TIGER1992/</td>
<td>2011-12-19 07:56:00</td>
<td>-</td>
<td></td>
<td>True</td>
<td>TIGER1992</td>
<td>False</td>
<td>https://www2.census.gov/geo/tiger/TIGER1992</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>TIGER1999/</td>
<td>2012-02-13 11:19:00</td>
<td>-</td>
<td></td>
<td>True</td>
<td>TIGER1999</td>
<td>False</td>
<td>https://www2.census.gov/geo/tiger/TIGER1999</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>TIGER2002/</td>
<td>2015-05-05 18:37:00</td>
<td>-</td>
<td></td>
<td>True</td>
<td>TIGER2002</td>
<td>False</td>
<td>https://www2.census.gov/geo/tiger/TIGER2002</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Now that we have tools for scraping the any page in the Census’s file server, we can use those tools to retrieve data on the geographic entities in a given TIGER vintage.</p>
<div class="cell" data-execution_count="35">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">class</span> TIGERCatalog:</span>
<span id="cb11-2">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">__init__</span>(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>):</span>
<span id="cb11-3">        <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.dataset_vintages <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> get_tiger_vintages_metadata()</span>
<span id="cb11-4"></span>
<span id="cb11-5">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> get_vintage_metadata(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>, year: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> pd.DataFrame:</span>
<span id="cb11-6">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.dataset_vintages.loc[<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.dataset_vintages[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"TIGER</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>year<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">/"</span>].copy()</span>
<span id="cb11-7"></span>
<span id="cb11-8"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">class</span> TIGERVintageCatalog:</span>
<span id="cb11-9">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">__init__</span>(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>, year: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>, catalog: Optional[TIGERCatalog] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span>):</span>
<span id="cb11-10">        <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.year <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>(year)</span>
<span id="cb11-11">        <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.set_catalog(catalog<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>catalog)</span>
<span id="cb11-12"></span>
<span id="cb11-13">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> set_catalog(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>, catalog: Optional[TIGERCatalog]) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span>:</span>
<span id="cb11-14">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> catalog <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">is</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span>:</span>
<span id="cb11-15">            <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.catalog <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> TIGERCatalog()</span>
<span id="cb11-16">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span>:</span>
<span id="cb11-17">            <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.catalog <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> catalog</span>
<span id="cb11-18"></span>
<span id="cb11-19">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">@property</span></span>
<span id="cb11-20">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> vintage_metadata(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>):</span>
<span id="cb11-21">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.catalog.get_vintage_metadata(year<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.year)</span>
<span id="cb11-22"></span>
<span id="cb11-23">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">@property</span></span>
<span id="cb11-24">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> vintage_entities(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>):</span>
<span id="cb11-25">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">len</span>(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.vintage_metadata) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>:</span>
<span id="cb11-26">            tiger_vintage_url <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.vintage_metadata[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"metadata_url"</span>].values[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>]</span>
<span id="cb11-27">            <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> scrape_census_ftp_metadata_page(metadata_url<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>tiger_vintage_url)</span>
<span id="cb11-28">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span>:</span>
<span id="cb11-29">            <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">raise</span> <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">Exception</span>(</span>
<span id="cb11-30">                <span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"Failed to get unambiguous metadata (got </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>vintage_metadata<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">)"</span></span>
<span id="cb11-31">            )</span>
<span id="cb11-32"></span>
<span id="cb11-33">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> get_entity_metadata(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>, entity_name: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> pd.DataFrame:</span>
<span id="cb11-34">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.vintage_entities.loc[<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.vintage_entities[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"clean_name"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> entity_name].copy()</span>
<span id="cb11-35"></span>
<span id="cb11-36">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> print_entity_names(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>):</span>
<span id="cb11-37">        entity_names <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.vintage_entities.loc[</span>
<span id="cb11-38">            <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.vintage_entities[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"is_dir"</span>], <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"clean_name"</span></span>
<span id="cb11-39">        ].values</span>
<span id="cb11-40">        <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"TIGER Entity options for the </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>year<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;"> TIGER vintage:"</span>)</span>
<span id="cb11-41">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> entity_name <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> entity_names:</span>
<span id="cb11-42">            <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"  - </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>entity_name<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb11-43">        <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"Entity count: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">len</span>(entity_names)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
</details>
</div>
<div class="cell" data-execution_count="34">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1">tiger_catalog <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> TIGERCatalog()</span>
<span id="cb12-2">vintage_entity_catalog <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> TIGERVintageCatalog(year<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2022"</span>, catalog<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>tiger_catalog)</span>
<span id="cb12-3">vintage_entity_catalog.print_entity_names()</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>TIGER Entity options for the 2022 TIGER vintage:
  - ADDR
  - ADDRFEAT
  - ADDRFN
  - AIANNH
  - AITSN
  - ANRC
  - AREALM
  - AREAWATER
  - BG
  - CD
  - COASTLINE
  - CONCITY
  - COUNTY
  - COUSUB
  - EDGES
  - ELSD
  - ESTATE
  - FACES
  - FACESAH
  - FACESAL
  - FACESMIL
  - FEATNAMES
  - LINEARWATER
  - MIL
  - PLACE
  - POINTLM
  - PRIMARYROADS
  - PRISECROADS
  - PUMA
  - RAILS
  - ROADS
  - SCSD
  - SDADM
  - SLDL
  - SLDU
  - STATE
  - SUBBARRIO
  - TABBLOCK20
  - TBG
  - TRACT
  - TTRACT
  - UAC
  - UNSD
  - ZCTA520
Entity count: 44</code></pre>
</div>
</div>
<p>Let’s examine Census Tracts.</p>
<p>I’ll need some tooling to collect information on a given entity in a given TIGER vintage. I know this object will need data that’s in the relevant <code>TIGERVintageCatalog</code> instance, so I’ll make that an attribute of the entity vintage class. I could require that the use passes in a <code>TIGERVintageCatalog</code> instance (which would reduce the number of calls to the same Census resource in the usecase where a user is interactively working using these classes), but ultimately I’m going to build out pipelines that only collect one TIGER entity at a from a given vintage (as I don’t need most of the available entities listed above).</p>
<div class="cell" data-execution_count="36">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">class</span> TIGERGeographicEntityVintage:</span>
<span id="cb14-2">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">__init__</span>(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>, entity_name: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>, year: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>, catalog: Optional[TIGERCatalog] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span>):</span>
<span id="cb14-3">        <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.entity_name <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> entity_name</span>
<span id="cb14-4">        <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.year <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>(year)</span>
<span id="cb14-5">        <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.vintage_catalog <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> TIGERVintageCatalog(year<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>year, catalog<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>catalog)</span>
<span id="cb14-6">        <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.entity_metadata <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.vintage_catalog.get_entity_metadata(entity_name<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.entity_name)</span>
<span id="cb14-7"></span>
<span id="cb14-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">@property</span></span>
<span id="cb14-9">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> entity_url(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>):</span>
<span id="cb14-10">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.entity_metadata[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"metadata_url"</span>].values[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>]</span>
<span id="cb14-11"></span>
<span id="cb14-12">tiger_tract22_obj <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> TIGERGeographicEntityVintage(entity_name<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"TRACT"</span>, year<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2022"</span>, catalog<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>tiger_catalog)</span>
<span id="cb14-13">display(tiger_tract22_obj.entity_metadata)</span>
<span id="cb14-14">entity_df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> scrape_census_ftp_metadata_page(metadata_url<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>tiger_tract22_obj.entity_url)</span>
<span id="cb14-15"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(entity_df.shape)</span>
<span id="cb14-16">display(entity_df.head(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>))</span></code></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">name</th>
<th data-quarto-table-cell-role="th">last_modified</th>
<th data-quarto-table-cell-role="th">size</th>
<th data-quarto-table-cell-role="th">description</th>
<th data-quarto-table-cell-role="th">is_dir</th>
<th data-quarto-table-cell-role="th">clean_name</th>
<th data-quarto-table-cell-role="th">is_file</th>
<th data-quarto-table-cell-role="th">metadata_url</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">41</td>
<td>TRACT/</td>
<td>2022-09-30 22:39:00</td>
<td>-</td>
<td></td>
<td>True</td>
<td>TRACT</td>
<td>False</td>
<td>https://www2.census.gov/geo/tiger/TIGER2022/TRACT</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>(56, 8)</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">name</th>
<th data-quarto-table-cell-role="th">last_modified</th>
<th data-quarto-table-cell-role="th">size</th>
<th data-quarto-table-cell-role="th">description</th>
<th data-quarto-table-cell-role="th">is_dir</th>
<th data-quarto-table-cell-role="th">clean_name</th>
<th data-quarto-table-cell-role="th">is_file</th>
<th data-quarto-table-cell-role="th">metadata_url</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>tl_2022_01_tract.zip</td>
<td>2022-10-31 19:42:00</td>
<td>11M</td>
<td></td>
<td>False</td>
<td>tl_2022_01_tract.zip</td>
<td>True</td>
<td>https://www2.census.gov/geo/tiger/TIGER2022/TR...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>tl_2022_02_tract.zip</td>
<td>2022-10-31 19:42:00</td>
<td>3.0M</td>
<td></td>
<td>False</td>
<td>tl_2022_02_tract.zip</td>
<td>True</td>
<td>https://www2.census.gov/geo/tiger/TIGER2022/TR...</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Looking at the names, I see that the Census groups tracts by state <strong>FIPS</strong> code (Federal Information Processing Series code). I know the FIPS code for Illinois is “17” (you can review the FIPS codes for other geographic entities <a href="https://www.census.gov/library/reference/code-lists/ansi.html">here</a>). I also know I don’t always want to pull data for all states, so I need to add a method that allows the user to filter the entity files. Also, I should build in the step of getting the entity files metadata.</p>
<div class="cell" data-execution_count="47">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">class</span> TIGERGeographicEntityVintage:</span>
<span id="cb16-2">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">__init__</span>(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>, entity_name: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>, year: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>, catalog: Optional[TIGERCatalog] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span>):</span>
<span id="cb16-3">        <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.entity_name <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> entity_name</span>
<span id="cb16-4">        <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.year <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>(year)</span>
<span id="cb16-5">        <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.vintage_catalog <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> TIGERVintageCatalog(year<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>year, catalog<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>catalog)</span>
<span id="cb16-6">        <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.entity_metadata <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.vintage_catalog.get_entity_metadata(entity_name<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.entity_name)</span>
<span id="cb16-7"></span>
<span id="cb16-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">@property</span></span>
<span id="cb16-9">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> entity_url(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>):</span>
<span id="cb16-10">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.entity_metadata[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"metadata_url"</span>].values[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>]</span>
<span id="cb16-11"></span>
<span id="cb16-12">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">@property</span></span>
<span id="cb16-13">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> entity_files_metadata(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>):</span>
<span id="cb16-14">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> scrape_census_ftp_metadata_page(metadata_url<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.entity_url)</span>
<span id="cb16-15"></span>
<span id="cb16-16">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> get_entity_file_metadata(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>, filter_str: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> pd.DataFrame:</span>
<span id="cb16-17">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.entity_files_metadata.loc[<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.entity_files_metadata[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span>].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>.contains(filter_str)].copy()</span>
<span id="cb16-18"></span>
<span id="cb16-19">tiger_tract22_obj <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> TIGERGeographicEntityVintage(entity_name<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"TRACT"</span>, year<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2022"</span>, catalog<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>tiger_catalog)</span>
<span id="cb16-20">il_tracts22_metadata <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> tiger_tract22_obj.get_entity_file_metadata(filter_str<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"_17_"</span>)</span>
<span id="cb16-21">display(il_tracts22_metadata)</span>
<span id="cb16-22"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"IL Tracts archive download Url: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>il_tracts22_metadata[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'metadata_url'</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>values[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">name</th>
<th data-quarto-table-cell-role="th">last_modified</th>
<th data-quarto-table-cell-role="th">size</th>
<th data-quarto-table-cell-role="th">description</th>
<th data-quarto-table-cell-role="th">is_dir</th>
<th data-quarto-table-cell-role="th">clean_name</th>
<th data-quarto-table-cell-role="th">is_file</th>
<th data-quarto-table-cell-role="th">metadata_url</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">14</td>
<td>tl_2022_17_tract.zip</td>
<td>2022-10-31 19:43:00</td>
<td>9.5M</td>
<td></td>
<td>False</td>
<td>tl_2022_17_tract.zip</td>
<td>True</td>
<td>https://www2.census.gov/geo/tiger/TIGER2022/TR...</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>IL Tracts archive download Url: https://www2.census.gov/geo/tiger/TIGER2022/TRACT/tl_2022_17_tract.zip</code></pre>
</div>
</div>
<p>Geopandas provides some extremely convenient functionality for loading data. I can provide the URL to a zipped archive (of geospatial files) to <code>geopandas</code>’ <code>read_file()</code> function and it handles the network request and unzipping for me.</p>
<div class="cell" data-execution_count="48">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1">il_tracts_gdf <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> gpd.read_file(il_tracts22_metadata[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"metadata_url"</span>].values[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>])</span></code></pre></div>
</details>
</div>
<div class="cell" data-execution_count="49">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(il_tracts_gdf.shape)</span>
<span id="cb19-2">il_tracts_gdf.head(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>(3265, 13)</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="49">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">STATEFP</th>
<th data-quarto-table-cell-role="th">COUNTYFP</th>
<th data-quarto-table-cell-role="th">TRACTCE</th>
<th data-quarto-table-cell-role="th">GEOID</th>
<th data-quarto-table-cell-role="th">NAME</th>
<th data-quarto-table-cell-role="th">NAMELSAD</th>
<th data-quarto-table-cell-role="th">MTFCC</th>
<th data-quarto-table-cell-role="th">FUNCSTAT</th>
<th data-quarto-table-cell-role="th">ALAND</th>
<th data-quarto-table-cell-role="th">AWATER</th>
<th data-quarto-table-cell-role="th">INTPTLAT</th>
<th data-quarto-table-cell-role="th">INTPTLON</th>
<th data-quarto-table-cell-role="th">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>17</td>
<td>019</td>
<td>010701</td>
<td>17019010701</td>
<td>107.01</td>
<td>Census Tract 107.01</td>
<td>G5020</td>
<td>S</td>
<td>5266000</td>
<td>30553</td>
<td>+40.1150269</td>
<td>-088.0329549</td>
<td>POLYGON ((-88.05240 40.11923, -88.05238 40.119...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>17</td>
<td>019</td>
<td>005902</td>
<td>17019005902</td>
<td>59.02</td>
<td>Census Tract 59.02</td>
<td>G5020</td>
<td>S</td>
<td>962402</td>
<td>4892</td>
<td>+40.1087344</td>
<td>-088.2247204</td>
<td>POLYGON ((-88.22891 40.11271, -88.22882 40.112...</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>And now I have plottable, spatially-joinable geospatial data ready to ingest into a data warehouse table or to plot out.</p>
<div class="cell" data-execution_count="45">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1">fig_width <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">14</span></span>
<span id="cb21-2"></span>
<span id="cb21-3">fig, ax <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> plt.subplots(figsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(fig_width, fig_width))</span>
<span id="cb21-4">ax <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> il_tracts_gdf.plot(facecolor<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"none"</span>, edgecolor<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"black"</span>, linewidth<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.015</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> fig_width, ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax)</span></code></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="https://www.matttriano.net/posts/004_census_tiger_dev/TIGER_data_collector_dev_files/figure-html/cell-15-output-1.png" class="img-fluid"></p>
</div>
</div>



</section>

<div class="quarto-listing quarto-listing-container-default" id="listing-listing">
<div class="list quarto-listing-default">

</div>
<div class="listing-no-matching d-none">
No matching items
</div>
</div> ]]></description>
  <guid>https://www.matttriano.net/posts/004_census_tiger_dev/TIGER_data_collector_dev.html</guid>
  <pubDate>Wed, 14 Jun 2023 00:00:00 GMT</pubDate>
  <media:content url="https://www.matttriano.net/posts/004_census_tiger_dev/Census_TIGER.png" medium="image" type="image/png" height="144" width="144"/>
</item>
<item>
  <title>Working with Notebooks</title>
  <dc:creator>Matt Triano</dc:creator>
  <link>https://www.matttriano.net/posts/002_notebook_test/jupyter_quarto.html</link>
  <description><![CDATA[ 




<div class="cell" data-execution_count="2">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> numpy <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> np</span>
<span id="cb1-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> matplotlib.pyplot <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> plt</span>
<span id="cb1-3"></span>
<span id="cb1-4">r <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.arange(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.01</span>)</span>
<span id="cb1-5">theta <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> np.pi <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> r</span>
<span id="cb1-6">fig, ax <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> plt.subplots(</span>
<span id="cb1-7">  subplot_kw <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'projection'</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'polar'</span>} </span>
<span id="cb1-8">)</span>
<span id="cb1-9">ax.plot(theta, r)</span>
<span id="cb1-10">ax.set_rticks([<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.5</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>])</span>
<span id="cb1-11">ax.grid(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb1-12">plt.show()</span></code></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-polar" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://www.matttriano.net/posts/002_notebook_test/jupyter_quarto_files/figure-html/fig-polar-output-1.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;1: A line plot on a polar axis</figcaption>
</figure>
</div>
</div>
</div>
<ol type="1">
<li><p>Develop a notebook</p></li>
<li><p>Render that notebook via</p>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">quarto_env</span><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">)</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">user@hostname:~/...$</span> quarto render notebook_name.ipynb</span></code></pre></div></li>
<li><p>Preview your document via</p>
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">quarto_env</span><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">)</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">user@hostname:~/...$</span> quarto preview quarto_blog/</span></code></pre></div>
<p>Note: Make sure <code>draft: false</code> in your document, or it won’t render.</p></li>
</ol>




<div class="quarto-listing quarto-listing-container-default" id="listing-listing">
<div class="list quarto-listing-default">

</div>
<div class="listing-no-matching d-none">
No matching items
</div>
</div> ]]></description>
  <guid>https://www.matttriano.net/posts/002_notebook_test/jupyter_quarto.html</guid>
  <pubDate>Mon, 12 Jun 2023 00:00:00 GMT</pubDate>
  <media:content url="https://www.matttriano.net/posts/002_notebook_test/studious_robot.png" medium="image" type="image/png" height="144" width="144"/>
</item>
<item>
  <title>Post With Code</title>
  <dc:creator>Harlow Malloc</dc:creator>
  <link>https://www.matttriano.net/posts/post-with-code/index.html</link>
  <description><![CDATA[ 




<p>This is a post with executable code.</p>




<div class="quarto-listing quarto-listing-container-default" id="listing-listing">
<div class="list quarto-listing-default">

</div>
<div class="listing-no-matching d-none">
No matching items
</div>
</div> ]]></description>
  <category>news</category>
  <category>code</category>
  <category>analysis</category>
  <guid>https://www.matttriano.net/posts/post-with-code/index.html</guid>
  <pubDate>Sun, 23 Apr 2023 00:00:00 GMT</pubDate>
  <media:content url="https://www.matttriano.net/posts/post-with-code/image.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Welcome To My Blog</title>
  <dc:creator>Tristan O&#39;Malley</dc:creator>
  <link>https://www.matttriano.net/posts/welcome/index.html</link>
  <description><![CDATA[ 




<p>This is the first post in a Quarto blog. Welcome!</p>
<p><img src="https://www.matttriano.net/posts/welcome/thumbnail.jpg" class="img-fluid"></p>
<p>Since this post doesn’t specify an explicit <code>image</code>, the first image in the post will be used in the listing page of posts.</p>




<div class="quarto-listing quarto-listing-container-default" id="listing-listing">
<div class="list quarto-listing-default">

</div>
<div class="listing-no-matching d-none">
No matching items
</div>
</div> ]]></description>
  <category>news</category>
  <guid>https://www.matttriano.net/posts/welcome/index.html</guid>
  <pubDate>Thu, 20 Apr 2023 00:00:00 GMT</pubDate>
</item>
</channel>
</rss>
