<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Matt Triano">
<meta name="dcterms.date" content="2023-07-01">
<meta name="description" content="How to get started playing with Midjourney">

<title>Matt Triano - Midjourney Experiments</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Matt Triano</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/MattTriano"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Midjourney Experiments</h1>
                  <div>
        <div class="description">
          How to get started playing with Midjourney
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">generative AI</div>
                <div class="quarto-category">midjourney</div>
                <div class="quarto-category">prompt eng</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Matt Triano </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">July 1, 2023</p>
      </div>
    </div>
    
      <div>
      <div class="quarto-title-meta-heading">Modified</div>
      <div class="quarto-title-meta-contents">
        <p class="date-modified">July 7, 2023</p>
      </div>
    </div>
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#midjourney-interface" id="toc-midjourney-interface" class="nav-link active" data-scroll-target="#midjourney-interface">Midjourney Interface</a></li>
  <li><a href="#setup-and-subscription" id="toc-setup-and-subscription" class="nav-link" data-scroll-target="#setup-and-subscription">Setup and Subscription</a>
  <ul class="collapse">
  <li><a href="#how-to-unsubscribe" id="toc-how-to-unsubscribe" class="nav-link" data-scroll-target="#how-to-unsubscribe">How to unsubscribe</a></li>
  </ul></li>
  <li><a href="#commands" id="toc-commands" class="nav-link" data-scroll-target="#commands">Commands</a></li>
  <li><a href="#prompt-parameters" id="toc-prompt-parameters" class="nav-link" data-scroll-target="#prompt-parameters">Prompt Parameters</a>
  <ul class="collapse">
  <li><a href="#aspect-ratio" id="toc-aspect-ratio" class="nav-link" data-scroll-target="#aspect-ratio">Aspect Ratio</a></li>
  <li><a href="#quality" id="toc-quality" class="nav-link" data-scroll-target="#quality">Quality</a></li>
  <li><a href="#stylize" id="toc-stylize" class="nav-link" data-scroll-target="#stylize">Stylize</a></li>
  <li><a href="#negative-prompting" id="toc-negative-prompting" class="nav-link" data-scroll-target="#negative-prompting">Negative prompting</a></li>
  </ul></li>
  <li><a href="#neat-prompt-tags" id="toc-neat-prompt-tags" class="nav-link" data-scroll-target="#neat-prompt-tags">Neat Prompt Tags</a>
  <ul class="collapse">
  <li><a href="#papercut" id="toc-papercut" class="nav-link" data-scroll-target="#papercut">Papercut</a></li>
  <li><a href="#in-the-style-of" id="toc-in-the-style-of" class="nav-link" data-scroll-target="#in-the-style-of">In the style of …</a></li>
  </ul></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary">Summary</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p>Over the past decade, the field of generative AI has made amazing progress. Driven by breakthrough advances in machine learning modeling strategies (primarily the GAN <a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> in 2014 and the Transformer <a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> in 2017) coupled with exponential growth of the amount of available computing power <a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>, generative AI applications for different data formats started appearing in the late 2010s and early 2020s. Notable examples include</p>
<ul>
<li>improvements to Google Translate (2017 <a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>),</li>
<li>fake face generation at <a href="https://www.thispersondoesnotexist.com">thispersondoesnotexist.com</a> (2019 <a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a>),</li>
<li>molecule structure discovery with AlphaFold (2020 <a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a>),</li>
<li>text-to-speech in different voices with tools like <a href="https://uberduck.ai">Uberduck.ai</a> (2020/2021 <a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a>),</li>
<li>general AI apps in HuggingFace’s <a href="https://huggingface.co/spaces">Spaces</a> sandbox (2021 <a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a>), and</li>
<li>text-to-image services (major options: DALL-E, Stable Diffusion, and Midjourney, 2021).</li>
</ul>
<p>Over the past two years, text-to-image platforms have jockeyed to lead that market with DALL-E generating a massive amount of initial hype, but Midjourney has emerged as the clearly superior service, despite having the least conventional workflow.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="GoogleTrends_generative_ai_image_services.png" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption>midjourney search frequency</figcaption>
</figure>
</div>
<p>Midjourney’s model was the first to reliably produce human forms (including well-formed hands, a difficulty for prior models), its best outputs are unambiguously superior to the best outputs from any other model, and it’s tremendously fun to play with. Midjourney isn’t free to use (the <a href="https://docs.midjourney.com/docs/plans">least expensive tier</a> is \$10/mo), but it’s free to look at (or search) the endless stream of images generated by other Midjourney users, it’s easy to unsubscribe, and it’s hard to not get at least \$10 worth of fun out of the service.</p>
<p>In this post, I’ll point out the important parts of the interface, walk through setup and (un)subscription, demonstrate useful commands, and show examples of what Midjourney can do.</p>
<section id="midjourney-interface" class="level2">
<h2 class="anchored" data-anchor-id="midjourney-interface">Midjourney Interface</h2>
<p>The Discord interface is packed with buttons, lists, and inputs, but you only need to know 5 areas you need to know.</p>
<ol type="1">
<li><strong>The Midjourney server icon</strong>
<ul>
<li>This, the ship icon, should always be selected.</li>
</ul></li>
<li><strong>The Channel list</strong>
<ul>
<li>Pick any “newbies-##” or “general-##” channel.</li>
</ul></li>
<li><strong>The Prompt input</strong>
<ul>
<li>This is where you enter prompts or commands for the <strong>Midjourney Bot</strong> to handle.</li>
</ul></li>
<li><strong>The Search bar</strong>
<ul>
<li>You can search through all public images in the Midjourney server.</li>
</ul></li>
<li><strong>The message display space</strong>
<ul>
<li>This is where you’ll find all (public) images generated in the selected channel (either by you or other users).</li>
</ul></li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Midjourney_interface_annotated.png" class="img-fluid figure-img"></p>
<figcaption>Interface</figcaption>
</figure>
</div>
</section>
<section id="setup-and-subscription" class="level1">
<h1>Setup and Subscription</h1>
<p>Midjourney runs out of the Midjourney Discord server, so you will need to make a Discord account and then join <a href="https://discord.com/servers/midjourney-662267976984297473">Midjourney’s Server</a>. Log in to <a href="https://discord.com/">Discord</a> (you can use Discord in your browser), go to the Midjourney Server, go to any newbie channel, and enter the <strong>/subscribe</strong> command. This will produce a link (specific to your Discord account) for the subscription page. Go to that link and pick a plan.</p>
<p>The <a href="https://docs.midjourney.com/docs/plans">least expensive tier</a> is $10 per month (for about 250 images per month) and you can have full usage rights*<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a> of the images you generate (at least as of 2023; the legal status of this technology may change in a few years<a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a>).</p>
<section id="how-to-unsubscribe" class="level2">
<h2 class="anchored" data-anchor-id="how-to-unsubscribe">How to unsubscribe</h2>
<p>To unsubscribe, go to the <a href="https://www.midjourney.com/account/">Midjourney account page</a>, click <strong>Cancel Plan</strong> (1, then 2), and then confirm cancellation in the popup. If you’ve used less than 20 GPU minutes (~30 images) in the billing period, you can choose to get a refund.</p>
<p><img src="Midjourney_subscription_page_annotated.png" class="img-fluid" style="width:80.0%" alt="Account page"></p>
<p><img src="Midjourney_cancellation_confirmation.png" class="img-fluid" alt="Cancellation Confirmation"></p>
</section>
</section>
<section id="commands" class="level1">
<h1>Commands</h1>
<ul>
<li><strong>/imagine</strong>: This command lets you enter an image-generating prompt. It’s the main command you’ll use.</li>
<li><strong>/info</strong>: This command shows the number of GPU minutes you’ve used that month as well as basic subscription information for your account.</li>
<li><strong>/subscribe</strong>: Enter this command to get a link to the subscription page for your Discord account. Use this to subscribe to a plan.</li>
<li><strong>/help</strong>: This command shows basic commands and tips.</li>
</ul>
<p>There are a <a href="https://docs.midjourney.com/docs/command-list">few more commands</a>, but you’ll mainly use <strong>/imagine</strong> and <strong>/info</strong>.</p>
</section>
<section id="prompt-parameters" class="level1">
<h1>Prompt Parameters</h1>
<p>You can add parameters on to the end of your image prompt to</p>
<section id="aspect-ratio" class="level2">
<h2 class="anchored" data-anchor-id="aspect-ratio">Aspect Ratio</h2>
<p>The desired aspect ratio for an image.</p>
<ul>
<li>Parameter: <code>--ar l:w</code> or <code>--aspect w:h</code> (where <code>w</code> is width <code>h</code> is height)</li>
<li>Examples:
<ul>
<li><code>--ar 1:1</code> (square, default)</li>
<li><code>--ar 9:16</code> (good for stories; typical phone screen aspect ratio)</li>
<li><code>--ar 19:10</code> (good for covers or landscapes)</li>
<li><code>--ar 4:5</code> (good for portraits)</li>
</ul></li>
</ul>
</section>
<section id="quality" class="level2">
<h2 class="anchored" data-anchor-id="quality">Quality</h2>
<p>Controls the rendering quality (i.e., amount of CPU time spent generating an image).</p>
<ul>
<li>Parameter: <code>--q value</code> or <code>--quality value</code></li>
<li>Accepted <code>value</code>s: [0.25, 0.5, 1] (higher values = higher quality, default is 1)</li>
<li>Example: <code>--q 0.25</code></li>
</ul>
</section>
<section id="stylize" class="level2">
<h2 class="anchored" data-anchor-id="stylize">Stylize</h2>
<p>Influences how strongly Midjourney stylizes an image.</p>
<ul>
<li>Parameter: <code>--s value</code> or <code>--stylize value</code></li>
<li>Accepted <code>value</code>s: 0 to 1000 (lower values = simpler, higher values = more intricate, default is 100)</li>
<li>Example: <code>--s 1000</code></li>
</ul>
</section>
<section id="negative-prompting" class="level2">
<h2 class="anchored" data-anchor-id="negative-prompting">Negative prompting</h2>
<p>Allows you to strongly signal something should be excluded from an image.</p>
<ul>
<li>Parameter: <code>--no value</code></li>
<li>Accepted <code>value</code>s: Any text.</li>
<li>Example: <code>--no plants</code></li>
</ul>
<p>The full list of parameters is available <a href="https://docs.midjourney.com/docs/parameter-list">here</a></p>
</section>
</section>
<section id="neat-prompt-tags" class="level1">
<h1>Neat Prompt Tags</h1>
<section id="papercut" class="level2">
<h2 class="anchored" data-anchor-id="papercut">Papercut</h2>
<p><img src="papercut_prompt.png" class="img-fluid"></p>
</section>
<section id="in-the-style-of" class="level2">
<h2 class="anchored" data-anchor-id="in-the-style-of">In the style of …</h2>
<p><img src="imgs/in_the_style_of_van_gogh_art_deco.png" class="img-fluid"></p>
<p>I’ll keep adding to the <strong>Neat Prompt Tags</strong> section.</p>
</section>
</section>
<section id="summary" class="level1">
<h1>Summary</h1>
<p>It’s a neat tool, and it makes it very easy to generate custom graphics (if you don’t need it to include exact words or accurate diagrams). I’m not sure how it will imapact the market prospects for graphic artists, or whether it will be legal in a few years (pending lawsuits or legislation), but it’s a lot of fun today.</p>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Ian Goodfellow et. al’s paper (2014) presenting the <a href="https://arxiv.org/pdf/1406.2661.pdf">Generative Adversarial Network</a> (or GAN) deep learning model architecture.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Google’s famous <a href="https://arxiv.org/pdf/1706.03762.pdf">Attention is all you need</a> paper (2017) which presented the Transformer deep learning model architecture.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>OpenAI’s <a href="https://openai.com/research/ai-and-compute">2018 analysis</a> of available computing power (or “compute”) and the amount of compute needed to train models.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>Google’s “Transformer: A Novel Neural Network Architecture for Language Understanding” <a href="https://ai.googleblog.com/2017/08/transformer-novel-neural-network.html">blog post</a> (2017) outlining how Google used Transformers to generate more accurate translations in Google Translate.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>Before or on <a href="https://web.archive.org/web/20190211190227/https://thispersondoesnotexist.com/">Feb 11, 2019</a>, <a href="https://www.thispersondoesnotexist.com/">This Person Does Not Exist</a> came online, generating a hyperrealistic but fake image of a human face.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>In late 2020, DeepMind (a subsidiary of Alphabet) <a href="https://web.archive.org/web/20201210212032/https://predictioncenter.org/casp14/doc/presentations/2020_12_01_TS_predictor_AlphaFold2.pdf">announced AlphaFold2</a> a reengineered version of their protein-structure prediction system, which uses transformers to predict <a href="https://www.nature.com/articles/s41586-021-03819-2">much more accurate</a> representations of proteins. Understanding the molecular structure of complex proteins makes it possible to determine what molecular groups are exposed on the outer surface of the molecule, which is useful as only those exposed groups can interact with groups on other molecules.<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>In late 2020, <a href="https://web.archive.org/web/20201122014832/https://uberduck.ai/">uberduck.ai</a> introduced a text-to-speech generation service and (per Uberduck copy) over 5000 voice models that can be used to generate speech from text. In early to mid 2021, this platform gained some press when users started generating not-quite-passable tracks with different rapper voice models.<a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p>Hugging created <a href="https://huggingface.co/spaces">spaces</a> where users could host small AI applications using existing transformer models on their platform.<a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn9"><p>assuming the use is not for commercial purposes by a company earning over $1M in gross refenue per year, which must purchase the Pro (\$60/mo) or Mega (\$120/mo) plan. <a href="https://docs.midjourney.com/docs/plans">Source</a><a href="#fnref9" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn10"><p>A <a href="https://web.archive.org/web/20230629095344/https://www.theverge.com/2023/1/16/23557098/generative-ai-art-copyright-legal-lawsuit-stable-diffusion-midjourney-deviantart">lawsuit</a><a href="#fnref10" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/www\.matttriano\.dev");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>